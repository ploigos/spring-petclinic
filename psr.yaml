---
step-runner-config:

  global-defaults:
    organization: ploigos
    service-name: petclinic
    application-name: petclinic

    container-registries:
      nexus-docker-devsecops.apps.mqrik2lw.eastus.aroapp.io:
        username: ploigos
        password: UtlY8a1X8wAfTXv1

  generate-metadata:
  - implementer: Maven
  - implementer: Git
  - implementer: SemanticVersion

  unit-test:
    - implementer: MavenTest

  package:
  - implementer: MavenPackage

  create-container-image:
  - implementer: Buildah
    config:
      containers-config-auth-file: /var/jenkins_home/container-auth.json

  push-container-image:
  - implementer: Skopeo
    config:
      destination-url: nexus-docker-devsecops.apps.mqrik2lw.eastus.aroapp.io
      container-image-push-repository: ploigos/spring-petclinic

